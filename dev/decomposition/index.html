<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Decomposition · BranchFlowModel</title><meta name="title" content="Decomposition · BranchFlowModel"/><meta property="og:title" content="Decomposition · BranchFlowModel"/><meta property="twitter:title" content="Decomposition · BranchFlowModel"/><meta name="description" content="Documentation for BranchFlowModel."/><meta property="og:description" content="Documentation for BranchFlowModel."/><meta property="twitter:description" content="Documentation for BranchFlowModel."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BranchFlowModel</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">User Documentation</a></li><li><a class="tocitem" href="../methods/">Methods</a></li><li class="is-active"><a class="tocitem" href>Decomposition</a></li><li><a class="tocitem" href="../math/">Math</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Decomposition</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Decomposition</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NLaws/BranchFlowModel.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NLaws/BranchFlowModel.jl/blob/main/docs/src/decomposition.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>Methods to decompose and solve the <code>SinglePhase</code> Branch Flow Model are provided based on the work in  <a href="#[2]">[2]</a>. These methods are most advantageous when solving the non-linear (unrelaxed) power flow equations and are only valid(?) in radial networks.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.init_inputs!" href="#BranchFlowModel.init_inputs!"><code>BranchFlowModel.init_inputs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_inputs!(ps::Vector{Inputs{SinglePhase}}; init_vs::Dict = Dict())</code></pre><p>Set the load on the upstream leaf noades equal to the sum of all the loads in the downstream inputs. It is important that the order of <code>ps</code> is from leaf branches to trunk branches so that the sums of loads take into account all downstream sub-trees.</p><p>if <code>init_vs</code> is provided, the <code>p.v0</code> is set for the <code>Input</code> with its <code>p.substation_bus</code> equal      to the key in <code>init_vs</code></p><pre><code class="language-julia hljs">init_vs = Dict(
    &quot;sub_bus_1&quot; =&gt; 0.98
)

for p in ps
    if p.substation_bus in keys(init_vs)
        p.v0 = init_vs[p.substation_bus]
    end
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L33-L53">source</a></section><section><div><pre><code class="language-julia hljs">init_inputs!(mg::MetaDiGraph; init_vs::Dict = Dict())</code></pre><p>Use the <code>:load_sum_order</code> in <code>mg</code> to <code>init_inputs!</code> in the correct order, i.e. set the loads at the leaf - substation connections as sums of all the loads (and the voltages at substations)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L83-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.set_inputs!" href="#BranchFlowModel.set_inputs!"><code>BranchFlowModel.set_inputs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_inputs!(mg::MetaDiGraph; α::Float64=0.0)</code></pre><p>Set the shared values in each subgraph / vertex of mg:</p><ol><li>set the current vertex&#39;s v0 to its inneighbor&#39;s voltage</li><li>set the current vertex P/Qload to the outneighbors&#39; substation_bus loads</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L96-L102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.split_at_busses" href="#BranchFlowModel.split_at_busses"><code>BranchFlowModel.split_at_busses</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">split_at_busses(p::Inputs{SinglePhase}, at_busses::Vector{String})</code></pre><p>Split <code>Inputs</code> using the <code>at_busses</code></p><p>returns MetaDiGraph with vertex properties <code>:p</code> containing <code>Input</code> for the sub-graphs. For example <code>mg[2, :p]</code> is the <code>Input</code> at the second vertex of the graph created by splitting  the network via the <code>at_busses</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L171-L179">source</a></section><section><div><pre><code class="language-julia hljs">split_at_busses(p::Inputs{SinglePhase}, at_busses::Vector{String}, with_busses::Vector{Vector{String}})</code></pre><p>Split up <code>p</code> using the <code>at_busses</code> as each new <code>substation_bus</code> and containing the corresponding <code>with_busses</code>. The <code>at_busses</code> and <code>with_busses</code> can be determined using <code>splitting_busses</code>.</p><p>NOTE: this variation of splt<em>at</em>busses allows for more than two splits at the same bus; whereas the other implementation of split<em>at</em>busses only splits the network into two parts for everything above and everything below a splitting bus.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L228-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.get_diffs" href="#BranchFlowModel.get_diffs"><code>BranchFlowModel.get_diffs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_diffs(mg::MetaDiGraph)</code></pre><p>Uses the JuMP Models stored in mg[:m] to calculate the difference between Pj, Qj, and |v| at every leaf/substation connection. </p><p>returns three <code>Float64[]</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L300-L307">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.splitting_busses" href="#BranchFlowModel.splitting_busses"><code>BranchFlowModel.splitting_busses</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">splitting_busses(p::Inputs{SinglePhase}, source::String; threshold::Int64=10)</code></pre><p>Determine the busses to split a tree graph on by searching upward from the deepest leafs first and gathering the nearest busses until threshold is met for each subgraph.</p><p>Returns a <code>Vector{String}</code> for the bus names to split on and <code>Vector{Vector{String}}</code> for the  corresponding busses within each sub-graph.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It is not enough to have only the splitting busses to obey the <code>max_busses</code> limit because one must also know which sub branches to take from each splitting bus. In other words, we also need all the busses within each subgraph to split properly. For example, if a splitting bus has two sub branches then obeying the max_busses limit can require only including one sub branch out of the splitting bus. To know which branch to take we can use the other busses in the sub graph (which is why this method also returns the bussed in each subgraph).</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L342-L358">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.connect_subgraphs_at_busses" href="#BranchFlowModel.connect_subgraphs_at_busses"><code>BranchFlowModel.connect_subgraphs_at_busses</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">connect_subgraphs_at_busses(p::Inputs{SinglePhase}, at_busses::Vector{String}, subgraphs::Vector{Vector})</code></pre><p>The splitting_busses algorithm does not include over laps in subgraphs. But, we want overlaps at the splitting busses for solving the decomposed branch flow model. So here we add the overlapping splitting busses to each sub graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L404-L410">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>split_inputs</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BranchFlowModel.build_metagraph" href="#BranchFlowModel.build_metagraph"><code>BranchFlowModel.build_metagraph</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">build_metagraph(p::Inputs{SinglePhase}, source::String; max_busses::Int64=10)</code></pre><p>return MetaDiGraph with <code>:p</code> property set for every vertex by splitting the <code>Inputs</code> via <code>splitting_busses</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/BranchFlowModel.jl/blob/e4cc81010abc1a6b494f4330594691d2c139e661/src/decomposition.jl#L453-L457">source</a></section></article><h3 id="[2]"><a class="docs-heading-anchor" href="#[2]">[2]</a><a id="[2]-1"></a><a class="docs-heading-anchor-permalink" href="#[2]" title="Permalink"></a></h3><p>Sadnan, Rabayet, and Anamika Dubey. &quot;Distributed optimization using reduced network equivalents for radial power distribution systems.&quot; IEEE Transactions on Power Systems 36.4 (2021): 3645-3656.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../methods/">« Methods</a><a class="docs-footer-nextpage" href="../math/">Math »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 26 February 2024 02:55">Monday 26 February 2024</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
